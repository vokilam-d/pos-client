<div class="cart">

  <div class="cart__items">
    @for (cartItem of cartService.cartItems(); track cartItem.productId; let index = $index) {
      <div class="cart__item cart-item">
        <div class="cart-item__name">
          {{ cartItem.productName }}
        </div>

        @for (option of cartItem.selectedOptions; track option.optionId) {
          <div class="cart-item__option">
            <div class="cart-item__option-name">
              {{ option.optionName }}
            </div>

            <div class="cart-item__option-value-name">
              {{ option.optionValueName }}
            </div>
          </div>
        }

        <div class="cart-item__price-counter">
          <div class="cart-item__price">
            {{ cartService.calcItemPrice(cartItem) }} ₴
          </div>

          <div class="cart-item__counter">
            <button
              class="cart-item__inc-dec material-symbols-outlined"
              (click)="cartService.decrementQty(index)"
            >
              remove
            </button>

            <input
              class="cart-item__count"
              [(ngModel)]="cartItem.qty"
              type="number"
              [min]="0"
            >

            <button
              class="cart-item__inc-dec material-symbols-outlined"
              (click)="cartService.incrementQty(index)"
            >
              add
            </button>
          </div>

          <div class="cart-item__cost">
            {{ cartService.calcItemCost(cartItem) }} ₴
          </div>
        </div>
      </div>
    }
  </div>

  <button
    class="cart__buy"
    (click)="cartService.buy()"
    [disabled]="!cartService.cartItems().length"
  >
    Розрахувати @if (cartService.cartItems().length) { - {{ cartService.totalCost() }} ₴ }
  </button>
</div>
